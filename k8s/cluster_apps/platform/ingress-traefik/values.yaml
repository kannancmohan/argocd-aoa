traefik:
  additionalArguments:
    - "--providers.kubernetesingress=true"
    - "--providers.kubernetesingress.ingressendpoint.ip=localhost"
    # - "--providers.kubernetesingress.ingressendpoint.hostname=dc.traefik.k8s.cajun.pro"
  logs:
    general:
      level: DEBUG
    access:
      enabled: true
      format: json
      filePath: /var/log/traefik/access.log
      fields:
        headers:
          defaultmode: keep
      # filters:

  deployment:
    # replicas: 3
    additionalContainers:
      - name: tail-accesslogs
        image: busybox
        args: [ "/bin/sh", "-c", "tail -n+1 -F /var/log/traefik/access.log" ]
        volumeMounts:
          - name: logs
            mountPath: /var/log/traefik
    additionalVolumes:
    - name: logs
  additionalVolumeMounts:
  - name: logs
    mountPath: /var/log/traefik
  ingressRoute:
    dashboard:
      enabled: true
      matchRule: PathPrefix(`/dashboard`) || PathPrefix(`/api`)
      # matchRule: (Host(`traefik.dev.local`) && PathPrefix(`/dashboard`)) || (Host(`traefik.dev.local`) && PathPrefix(`/api`))
      # tls:
      #   certResolver: default-root-cert-issuer
      #   secretName: traefik-server-tls
    healthcheck:
      enabled: false
